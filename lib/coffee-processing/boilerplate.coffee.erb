<%= javascript_object %> = (__processing) ->
  for __sym of __processing when eval("typeof #{__sym} === 'undefined'")
    if typeof __processing[__sym] == 'function'
      eval "var #{__sym} = function() { return __processing.#{__sym}.apply(__processing, arguments) }"
    else
      eval "var #{__sym} = function() { return __processing.#{__sym} }"

  for __const of __processing.PConstants
    eval "var #{__const} = __processing.PConstants.#{__const}"

  for __sym in ['ArrayList', 'HashMap', 'PVector', 'ObjectIterator', 'PConstants']
    eval "var #{__sym} = __processing.#{__sym}"

  processing = __processing

  <%= code %>

  for callback in [
    'setup',
    'draw',
    'mouseClicked',
    'mouseDragged',
    'mouseMoved',
    'mouseOut',
    'mouseOver',
    'mousePressed',
    'mouseReleased',
    'keyPressed',
    'keyReleased',
    'keyTyped'
  ] when !eval("typeof #{__sym} === 'undefined'")
    eval "__processing.#{callback} = #{callback}"

